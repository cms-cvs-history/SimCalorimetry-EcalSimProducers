process testECALDigi = 
{

  module print = AsciiOutputModule { }

  # input
  source = PoolSource {
#     untracked string fileName = '/afs/cern.ch/user/g/govoni/public/CMSSW/rootfiles/simevent.root'
     untracked string fileName = '/afs/cern.ch/user/g/govoni/public/CMSSW/rootfiles/e100.root'
     untracked int32 maxEvents = -1
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
  }

  # geometry
  es_source = XMLIdealGeometryESSource
   {
#      FileInPath GeometryConfiguration = "Geometry/CMSCommonData/data/configuration.xml"
      FileInPath GeometryConfiguration = "SimG4CMS/Calo/test/data/testConfiguration.xml"
#     FileInPath GeometryConfiguration="Geometry/CaloEventSetup/test/TESTconfiguration.xml"
      string rootNodeName = ""
   }
  
  # output
  module out = PoolOutputModule 
   {	
	       untracked string fileName = 'digis.root'
	}

   module mix = MixingModule {
         secsource input = PoolRASource  {
#			       untracked vstring fileNames = {'/afs/cern.ch/user/g/govoni/public/CMSSW/rootfiles/simevent.root'}
			       untracked vstring fileNames = {'/afs/cern.ch/user/g/govoni/public/CMSSW/rootfiles/e100.root'}
                   string type = "poisson"
                   double averageNumber = 0
                   int32 minBunch = xxx
                   int32 maxBunch = xxx
                   int32 seed = 1234567
          }
          int32 bunchspace = 25
   }

  es_module = EcalPreshowerGeometryEP {}
  es_module = EcalBarrelGeometryEP {}
  es_module = EcalEndcapGeometryEP {}
  es_module = HcalHardcodeGeometryEP {}
  es_module = CaloTowerHardcodeGeometryEP {}
  es_module = CaloGeometryBuilder {}

  include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"

  path p = { mix, ecaldigi }
  endpath fine = { out }
}

