process testECALDigi = 
{

  service = Timing { } 

  service = MessageLogger { 
    untracked vstring destinations = {"cout"}
#    untracked vstring categories = { "EcalShape","EcalCoder","EcalDigi" }
#    untracked vstring debugModules = {"ecaldigi"}
    untracked PSet cout = { 
#      untracked string threshold = "DEBUG" 
#      untracked PSet DEBUG = { untracked int32 limit = 0 }
      untracked PSet INFO = { untracked int32 limit = -1 }
#      untracked PSet EcalShape = { untracked int32 limit = 10000000 }
#      untracked PSet EcalCoder = { untracked int32 limit = 10000000 }
#      untracked PSet EcalDigi  = { untracked int32 limit = 10000000 }
    }
  }

  service = RandomNumberGeneratorService
  {
      PSet moduleSeeds = 
      {
         untracked uint32 ecalUnsuppressedDigis = 54321
      }
  }
  module randomEngineStateProducer = RandomEngineStateProducer { }

  untracked PSet maxEvents = {untracked int32 input = -1}

  # input
  source = PoolSource {
     untracked vstring fileNames = {'file:simevent.root'}
     untracked uint32 debugVebosity = 10
     untracked bool   debugFlag     = true
  }

  #Geometry
  #
  include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
  # output
  module out = PoolOutputModule 
   {	
      untracked string fileName = 'digis.root'
   }

  include "SimGeneral/MixingModule/data/mixNoPU.cfi"   

  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

  include "CalibCalorimetry/Configuration/data/Ecal_FakeConditions.cff"

  include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"

  path p = { mix, ecalUnsuppressedDigis, randomEngineStateProducer}
  endpath fine = { out }

}

